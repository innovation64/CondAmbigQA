# CondAmbigQA - å®éªŒä»£ç ï¼ˆæ•´ç†ç‰ˆï¼‰

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

CondAmbigQAï¼ˆæ¡ä»¶æ€§æ¨¡ç³Šé—®ç­”ï¼‰æ˜¯ä¸€ä¸ªç ”ç©¶å¤§å‹è¯­è¨€æ¨¡å‹åœ¨å¤„ç†éœ€è¦é¢å¤–æ¡ä»¶ä¿¡æ¯æ‰èƒ½å‡†ç¡®å›ç­”çš„æ¨¡ç³Šé—®é¢˜æ—¶è¡¨ç°çš„é¡¹ç›®ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
clean_experiment_code/
â”œâ”€â”€ core/                      # æ ¸å¿ƒå®éªŒè„šæœ¬
â”‚   â”œâ”€â”€ config.py             # æ¨¡å‹é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ models.py             # æ¨¡å‹æ¥å£ç±»
â”‚   â”œâ”€â”€ utils.py              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ evaluator.py          # è¯„ä¼°æ¡†æ¶
â”‚   â”œâ”€â”€ main_experiment.py    # ä¸»å®éªŒè¿è¡Œå™¨
â”‚   â”œâ”€â”€ pure_llm_experiment.py # çº¯LLMå®éªŒï¼ˆæ— æ£€ç´¢ï¼‰
â”‚   â””â”€â”€ ground_truth_experiment.py # çœŸå€¼æ ‡æ³¨å®éªŒ
â”œâ”€â”€ visualization/            # å¯è§†åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ main_visualizer.py    # ç»¼åˆç»“æœå¯è§†åŒ–
â”‚   â”œâ”€â”€ comparison_visualizer.py # å®éªŒå¯¹æ¯”å›¾è¡¨
â”‚   â””â”€â”€ statistics_visualizer.py # ç»Ÿè®¡åˆ†æå›¾è¡¨
â”œâ”€â”€ data/                     # æ•°æ®é›†
â”‚   â”œâ”€â”€ cleaned_mcaqa.json   # ä¸»æ•°æ®é›† (2,200æ ·æœ¬) - ä½¿ç”¨è¿™ä¸ª
â”‚   â””â”€â”€ mcaqa.json          # æ—§æ•°æ®é›† (200æ ·æœ¬) - å¿½ç•¥
â”œâ”€â”€ sample_results/          # ç¤ºä¾‹è¾“å‡ºæ–‡ä»¶
â”‚   â”œâ”€â”€ results_gpt-4o.json  # GPT-4oç»“æœç¤ºä¾‹
â”‚   â”œâ”€â”€ results_gemma2_latest.json # Gemma2ç»“æœç¤ºä¾‹
â”‚   â””â”€â”€ pure_llm_results_gpt-4o.json # çº¯LLMç»“æœç¤ºä¾‹
â”œâ”€â”€ retrieval/               # æ£€ç´¢å¢å¼º
â”‚   â”œâ”€â”€ indexing.py          # æ–‡æ¡£ç´¢å¼•
â”‚   â””â”€â”€ retrieval_data.py    # æ£€ç´¢å¤„ç†
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â””â”€â”€ requirements.txt         # Pythonä¾èµ–
```

## ğŸ“Š æ•°æ®éœ€æ±‚

### æ ¸å¿ƒæ•°æ®é›†
- **ä¸»æ•°æ®é›†**: `data/cleaned_mcaqa.json` (2,200ä¸ªæ ·æœ¬)
- **âš ï¸ é‡è¦**: ä¸è¦ä½¿ç”¨ `mcaqa.json` (åªæœ‰200ä¸ªæ ·æœ¬ - è¿‡æ—¶ç‰ˆæœ¬)

### å®éªŒ â†’ å¯è§†åŒ–æ•°æ®æµç¨‹
1. **è¿è¡Œå®éªŒ** â†’ åœ¨å½“å‰ç›®å½•ç”Ÿæˆç»“æœæ–‡ä»¶
2. **ç§»åŠ¨ç»“æœ** â†’ å¤åˆ¶åˆ° `sample_results/` ä¾›å¯è§†åŒ–ä½¿ç”¨
3. **è¿è¡Œå¯è§†åŒ–** â†’ ä» `sample_results/` è¯»å–æ•°æ®

**å®Œæ•´æ•°æ®éœ€æ±‚**: å‚è§ `docs/DATA_REQUIREMENTS.md`

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®
```bash
pip install -r requirements.txt

# OpenAIæ¨¡å‹é…ç½®
export OPENAI_API_KEY="your_api_key"

# Ollamaæœ¬åœ°æ¨¡å‹ - ç¡®ä¿Ollamaè¿è¡Œåœ¨localhost:11434
```

### 2. è¿è¡Œå®éªŒ

#### ä¸»å®éªŒï¼ˆå¸¦æ£€ç´¢å¢å¼ºï¼‰
```bash
cd core
python main_experiment.py
```

#### çº¯LLMå®éªŒï¼ˆæ— æ£€ç´¢ï¼‰
```bash
cd core  
python pure_llm_experiment.py
```

#### çœŸå€¼æ ‡æ³¨å®éªŒ
```bash
cd core
python ground_truth_experiment.py
```

### 3. ç»“æœå¯è§†åŒ–

#### ç»¼åˆç»“æœåˆ†æ
```bash
cd visualization
python main_visualizer.py
```

#### å®éªŒå¯¹æ¯”åˆ†æ
```bash
cd visualization
python comparison_visualizer.py
```

#### ç»Ÿè®¡åˆ†æ
```bash
cd visualization
python statistics_visualizer.py
```

## âš™ï¸ é…ç½®è¯´æ˜

### æ”¯æŒçš„æ¨¡å‹ (core/config.py)

**OpenAIæ¨¡å‹:**
- `gpt-4o`
- `glm-4-plus`

**æœ¬åœ°Ollamaæ¨¡å‹:**  
- `llama3.1:8b`
- `qwen2.5:latest`
- `mistral:latest`
- `gemma2:latest`
- `glm4:latest`
- `deepseek-r1:7b`

## ğŸ“Š è¯„ä¼°æŒ‡æ ‡

- **æ¡ä»¶åˆ†æ•°**: ç”Ÿæˆæ¡ä»¶çš„å‡†ç¡®æ€§
- **ç­”æ¡ˆåˆ†æ•°**: æ¡ä»¶æ€§ç­”æ¡ˆçš„æ­£ç¡®æ€§
- **å¼•ç”¨åˆ†æ•°**: å¼•ç”¨æ¥æºçš„è´¨é‡
- **ç»¼åˆåˆ†æ•°**: åŠ æƒç»„åˆè¯„åˆ†

## ğŸ“ˆ è¾“å‡ºæ–‡ä»¶

**ä¸»è¦ç»“æœ:**
- `results_{model_name}.json` - å®Œæ•´å®éªŒç»“æœ
- `intermediate_results_{model_name}_main_experiment.json` - ä¸­é—´æ•°æ®

**çº¯LLMç»“æœ:**  
- `pure_llm_results_{model_name}.json` - æ— æ£€ç´¢ç»“æœ

**çœŸå€¼æ ‡æ³¨:**
- `results_{model_name}_ground_truth.json` - æ ‡æ³¨çœŸå€¼

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIè¿æ¥é”™è¯¯**
   - æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥
   - éªŒè¯æœ¬åœ°æ¨¡å‹çš„OllamaæœåŠ¡çŠ¶æ€

2. **å†…å­˜é—®é¢˜**
   - ä½¿ç”¨æ›´å°çš„æ¨¡å‹æˆ–åœ¨é…ç½®ä¸­å‡å°‘æ‰¹å¤„ç†å¤§å°

3. **ä¾èµ–åŒ…ç¼ºå¤±**
   - è¿è¡Œ `pip install -r requirements.txt --force-reinstall`

## ğŸ“ æ ¸å¿ƒç‰¹æ€§

- **æ¸…æ™°æ¶æ„**: ç»„ç»‡è‰¯å¥½ã€æ˜“äºç»´æŠ¤çš„ä»£ç ç»“æ„
- **å¤šæ¨¡å‹æ”¯æŒ**: OpenAI APIå’Œæœ¬åœ°Ollamaæ¨¡å‹
- **ç»¼åˆè¯„ä¼°**: å¤šç»´åº¦è¯„åˆ†ç³»ç»Ÿ
- **ä¸°å¯Œå¯è§†åŒ–**: ç»Ÿè®¡åˆ†æå’Œå¯¹æ¯”å›¾è¡¨
- **çµæ´»é…ç½®**: æ˜“äºè°ƒæ•´æ¨¡å‹å’Œå‚æ•°

## ğŸ“„ è®¸å¯è¯

ä»…ä¾›å­¦æœ¯ç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ”„ å·¥ä½œæµç¨‹

1. **é…ç½®** â†’ å®‰è£…ä¾èµ–å¹¶é…ç½®æ¨¡å‹
2. **è¿è¡Œ** â†’ ä½¿ç”¨æ ¸å¿ƒè„šæœ¬æ‰§è¡Œå®éªŒ
3. **åˆ†æ** â†’ ç”Ÿæˆå¯è§†åŒ–å’Œç»Ÿè®¡
4. **å¯¹æ¯”** â†’ è¯„ä¼°ä¸åŒæ¨¡å‹å’Œæ–¹æ³•

è¯¦ç»†è‹±æ–‡æ–‡æ¡£è¯·å‚è§ `README.md`ã€‚